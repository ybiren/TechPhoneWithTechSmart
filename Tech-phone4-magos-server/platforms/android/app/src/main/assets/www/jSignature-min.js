var signature=function(f){function r(a,h){return function(){if("function"==typeof h&&!h())return!1;for(var b=this.childNodes,c=0;c<b.length;c++){var d=b[c];if(1==d.nodeType&&"signature-field"==d.getAttribute("data-role")&&l[d.name]){var f=l[d.name].toDataURL(a.format);d.value=f}}return!0}}function p(a,h,b){var c=a,d=0;for(a=0;c;)d+=c.offsetLeft-c.scrollLeft,a+=c.offsetTop-c.scrollTop,c=c.offsetParent;c=d;if(f.navigator.userAgent.match(/Android/)||f.navigator.userAgent.match(/iPhone/)||f.navigator.userAgent.match(/iPod/)||
f.navigator.userAgent.match(/iPad/))c+=document.body.scrollLeft+document.documentElement.scrollLeft,a+=document.body.scrollTop+document.documentElement.scrollTop;return{x:h-c,y:b-a}}function q(a){return 0<f.navigator.userAgent.indexOf("MSIE")||f.navigator.userAgent.match(/Trident/)?{x:a.pageX,y:a.pageY}:{x:a.x||a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:a.y||a.clientY+document.body.scrollTop+document.documentElement.scrollTop}}function s(a){a=document.createElement("canvas");
a.onmousedown=function(a){a=a||f.event;a.preventDefault&&a.preventDefault();a=q(a);a=p(this,a.x,a.y);this.x=a.x;this.y=a.y;this.pressOk=!0};a.onmouseup=function(a){a=a||f.event;a.preventDefault&&a.preventDefault();this.pressOk=!1};a.onmouseover=function(a){this.style.cursor="pointer"};a.onmousemove=function(a){this.style.cursor="pointer";if(this.pressOk){a=a||f.event;a.preventDefault&&a.preventDefault();a=q(a);a=p(this,a.x,a.y);var b=this.getContext("2d");b.save();b.strokeStyle=this.pen;b.lineWidth=
this.penWidth;b.beginPath();b.moveTo(this.x,this.y);b.lineTo(a.x,a.y);b.stroke();b.closePath();b.restore();this.x=a.x;this.y=a.y;this.empty=!1}};a.ontouchstart=function(a){a.preventDefault();this.onmousedown(a.touches[0])};a.ontouchmove=function(a){a.preventDefault();this.onmousemove(a.touches[0])};a.ontouchend=function(a){a.preventDefault();this.onmouseup(a.touches[0])};return a}function t(a,f,b,c){var d=b.getAttribute("data-role");d?d in c?b.onclick=function(){c[d](this.getAttribute("data-value"))}:
console.log&&console.log("Wrong data-role '"+d+"' for your button"):console.log&&console.log("Can't find the attribute data-role for the button")}function u(a,f,b){var c=parseInt(b.getAttribute("data-height")||0)||a.height,d=parseInt(b.getAttribute("data-width")||0)||a.width,m=b.getAttribute("data-background")||a.background,g=b.getAttribute("data-border")||a.border,k=b.getAttribute("data-pen")||a.pen,l=b.getAttribute("data-penWidth")||a.penWidth,e=s(a);e.initPen=k;e.initPenWidth=l;e.pen=k;e.penWidth=
l;e.name=b.name;e.width=d;e.height=c;e.background=m;e.border=g;b.parentNode.replaceChild(e,b);a=document.createElement("input");a.type="hidden";a.setAttribute("data-role","signature-field");a.name=b.name;f.appendChild(a);e.setPenColor=function(a){e.pen=a||e.pen};e.setPenWidth=function(a){e.penWidth=a||e.penWidth};e.defaultConfig=function(){this.setPenColor(this.initPen);this.setPenWidth(this.initPenWidth);this.clear()};e.clear=function(){this.empty=!0;var a=this.getContext("2d");a.fillStyle=this.background;
a.fillRect(0,0,this.width,this.height);a.strokeStyle=this.border;a.strokeRect(0,0,d,c)};e.clear();return e}var v={autoInit:!0,format:"image/png",background:"#EEE",pen:"#000",penWidth:2,border:"#AAA",width:270,height:120},l={};return{init:function(a,h){if(!f.HTMLCanvasElement||"string"==typeof a&&(a=document.getElementById(a),!a))return null;a&&!h&&!a.nodeName&&(h=a,a=null);if(!a||"FORM"!=a.nodeName){var b=(a?a:document.body).getElementsByTagName("form");if(0==b.length)return null;for(var c=0;c<b.length;c++)this.init(b[c],
h);return this}h=h||v;if("undefined"!=typeof signatureConfig)for(b in signatureConfig)signatureConfig.hasOwnProperty(b)&&(h[b]=signatureConfig[b]);for(var b=h,c=a,d=c.getElementsByTagName("input"),m=[],g=0;g<d.length;g++){var k=d[g];"signature"==k.getAttribute("type")&&m.push(k)}if(0!=m.length){for(g=0;g<m.length;g++){var n=u(b,c,m[g]);l[m[g].name.toLowerCase()]=n}for(g=0;g<d.length;g++)k=d[g],"button"==k.getAttribute("type")&&k.hasAttribute("data-signature")&&((n=l[k.getAttribute("data-signature").toLowerCase()])?
t(b,c,k,n):(m="Wrong button data-signature value '"+k.getAttribute("data-signature")+"' ?",console.log&&console.log(m)));c.onsubmit=r(b,c.onsubmit)}return this},isManaged:function(){return f.HTMLCanvasElement||!1},isEmptySignature:function(a){return l[a]&&l[a].empty},getSignatureCanvas:function(a){return l[a]}}}(window);
(function(){if("undefined"==typeof signatureConfig||signatureConfig.autoInit||"undefined"==typeof signatureConfig.autoInit)if(window.addEventListener)window.addEventListener("DOMContentLoaded",function(){signature.init()},!1);else if(window.attachEvent)window.attachEvent("onload",function(){signature.init()});else if(window.onload){var f=window.onload();window.onload=function(){f&&f();signature.init()}}})();
